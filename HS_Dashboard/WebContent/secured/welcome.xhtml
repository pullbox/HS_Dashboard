<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui" xmlns:o="http://omnifaces.org/ui"
	xmlns:of="http://omnifaces.org/functions"
	template="/templates/tr-template.xhtml">

	<ui:define name="content">

		<f:metadata>
			<f:viewParam id="userName" name="userName"
				value="#{welcomeBean.userName}" />
			<f:viewAction action="#{welcomeBean.init}" />
		</f:metadata>

		<h:form id="welcome">
			<h:message id="messages" showDetail="true" autoUpdate="true"
				closable="true" />


			<div class="ui-g">
				<div class="ui-g-8" align="left">
					<p:commandButton id="button" value="Create CTA"
						action="#{navigationBean.createCTA}" />
				</div>
				<div class="uri-g-3" align="right"></div>
				<div class="uri-g-1" align="right">
					<p:outputLabel id="userid" value="Welcome #{welcomeBean.userName}"
						readonly="true" />
				</div>
			</div>



			<p:dataTable var="cta" value="#{welcomeBean.ctas}">

				<p:column headerText="CTA">
					<p:commandLink id="edit" value="#{cta.id}"
						action="#{navigationBean.editCTA}">
						<f:param name="ctaid" value="#{cta.id}" />
					</p:commandLink>


				</p:column>
				<p:column headerText="Source">
					<p:outputLabel value="#{cta.source}" />
				</p:column>
				<p:column headerText="Type">
					<p:outputLabel value="#{cta.type}" />
				</p:column>
				<p:column headerText="Status">
					<p:outputLabel value="#{cta.status}" />
				</p:column>
				<p:column headerText="Priority">
					<p:outputLabel value="#{cta.priority}" />
				</p:column>
				<p:column headerText="Description">
					<p:outputLabel value="#{cta.description}" />
				</p:column>
				<p:column headerText="Due Date">
					<p:outputLabel value="#{cta.dueDate}">
						<f:convertDateTime pattern="MM/dd/yyyy" />
					</p:outputLabel>
				</p:column>
				<p:column headerText="Created by">
					<p:outputLabel value="#{cta.createby.FULL_NAME}" />
				</p:column>
				<p:column headerText="Created Date">
					<p:outputLabel value="#{cta.createdDate}">
						<f:convertDateTime pattern="MM/dd/yyyy HH:mm" />
					</p:outputLabel>
				</p:column>
				
				<p:column headerText="Modified by">
					<p:outputLabel value="#{cta.modifiedby.FULL_NAME}" />
				</p:column>
				<p:column headerText="Modified Date">
					<p:outputLabel value="#{cta.modifiedDate}">
						<f:convertDateTime pattern="MM/dd/yyyy HH:mm" />
					</p:outputLabel>
				</p:column>
				<p:column headerText="Note">
					<p:outputLabel value="#{cta.note}" />
				</p:column>


			</p:dataTable>

			<br />
			<p:commandLink action="#{welcomeBean.doLogout}" value="Logout" />
		</h:form>

	</ui:define>
</ui:composition>